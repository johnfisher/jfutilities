# Znyx Networks
# OA4 configuration file 
# for recovery and upgrade
# (used by python ConfigParser)
#################################
# End user: DO NOT EDIT THIS FILE
#################################

[data]
# znyx platform; b1c and b1n are different; use lower case.
platform: b1n
# OA4 release
release: 4.1.7
# partition numbering
recoverpart: /dev/sda1
mainpart: /dev/sda1
# legacy = 1 partition; recovery = two partitions
# "legacy" = ( mbr)  vs recovery = "gpt" (efi)
diskplan: legacy
#  changed in every release
mainbz2: oa4-hv-b1n-main.raw.bz2
recoverybz2: oa4-hv-b1n-recovery.raw.bz2
entirebz2: oa4-hv-b1n.raw.bz2
# recovery not implemented = false ; is implemented = true
recoveryplan: false
# apt-get upgrade available in this release
apt-get-available: true
tarball dir: Znyx-B1-1672
os-to-ipmi-eth: eth3
os-to-ipmi-br: br3
os-to-ipmi-eth-addr: 192.168.1.103
ipmi-lan-channel: 2
# must match below in firmware-jobs
ipmi-lan-addr: 192.168.1.100 

[recipe]
IPMC FW: 2.06 
IPMC BootLdr: 2.02  
FRU Info: 1.00  
MAC EEPROMs: 3.00  
FPGA Image: 2.00  
CPLD Image: 3.00  
Compute UEFI: 2.13
Network UEFI: 2.12
pdr: 1674

[apt-jobs]
1: apt-get update -q 
2: export DEBIAN_FRONTEND=noninteractive && apt-get dist-upgrade -q -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confnew"
3: export DEBIAN_FRONTEND=noninteractive && apt-get install -q -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confnew" libcurl3 curl pbzip2 linux-image-3.2.16oa4 linux-headers-3.2.16oa4

[firmware-jobs]
1: echo "y" | ipmitool -H 192.168.1.100 -A none  -z 248 hpm upgrade b1-fw.hpm1 activate
2: echo "y" | ipmitool -H  192.168.1.100 -A none -z 248 hpm upgrade b1-1672.hpm1 activate

[valid-versions]
# valid versions of OA4 to upgrade from
1:	4.1.5
2:	4.1.6
3:	4.1.6.1
4:	4.1.7
